@using System.Globalization
@using Microsoft.AspNet.Identity
@using Tripod.Domain.Security
@using UserConstraints = Tripod.Domain.Security.User.Constraints

@model ChangeUserName

@{
    ViewBag.Title = "User";
}

@section styles
{
    <style>
        .user.jumbotron h1 {
            margin: 0;
            white-space: nowrap;
            -ms-text-overflow: ellipsis;
            -o-text-overflow: ellipsis;
            text-overflow: ellipsis;
            overflow-x: hidden;
            overflow-y: visible;
            display: block;
            line-height: normal;
        }

        .user.jumbotron p.lead {
            margin-bottom: 0;
        }

        .jumbotron img.gravatar {
            width: 64px;
            margin-right: 16px;
        }

        @@media (min-width: 768px) {
            .jumbotron img.gravatar {
                width: 108px;
                margin-right: 20px;
            }
        }

        .nav-header a, .nav > li.nav-header a {
            margin-bottom: 2px;
            border-radius: 5px 5px 0 0;
            border: solid 1px #ddd;
            padding: 4px;
            background-color: #f5f5f5;
            white-space: nowrap;
            -ms-text-overflow: ellipsis;
            -o-text-overflow: ellipsis;
            text-overflow: ellipsis;
            overflow: hidden;
            display: block;
            color: #333;
        }

            .nav-header a:hover, .nav > li.nav-header a:hover {
                background-color: #e7e7e7;
                text-decoration: none;
            }

        .nav-header img.gravatar {
            margin-right: 4px;
        }

        nav.user ul > li > a > i {
            color: #000;
        }

        nav.user ul > li.active > a > i {
            color: #fff;
        }
    </style>
}


@{ Html.RenderAction(MVC.User.JumbotronById()); }

@if (Model.UserId.ToString(CultureInfo.InvariantCulture) == User.Identity.GetUserId())
{
    <div class="row">
        <div class="col-md-4 hidden-xs hidden-sm">
            <nav class="user">
                <ul class="nav nav-pills nav-stacked" role="navigation">
                    <li class="nav-header">
                        <a href="@Url.Action(MVC.User.ById(Html.AuthenticatedUserId()))">
                            @Html.Gravatar(32)
                            <strong>@User.Identity.Name</strong>
                        </a>
                    </li>
                    <li class="active">
                        <a href="@Url.Action(MVC.User.ById(Html.AuthenticatedUserId()))">
                            <i class="fa fa-user"></i>
                            My Account
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fa fa-envelope"></i>
                            Email Addresses
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fa fa-sign-in"></i>
                            Logins
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fa fa-key"></i>
                            Password
                        </a>
                    </li>
                </ul>
            </nav>
            <hr class="hr-md hr-space" />
        </div>
        <div class="col-md-8" role="main">

            <p>
                If you would like to change your @UserConstraints.NameLabel.ToLower(), you can use the text box below to do so.
            </p>

            @{ Html.RenderPartial(MVC.Security.Views._ChangeUserNameForm); }
        </div>
    </div>
}

@section scripts
{
    @{ Html.RenderPartial(MVC.Scripts.Views.Angular); }
    <script src="~/app/security/ChangeUserNameForm.js"></script>
}