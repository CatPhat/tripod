"use strict";var App;(function(n){(function(n){(function(n){n.directiveName="ngT3SubmitAction";var t=function(){function n(){this.attempted=!1}return n.prototype.needsAttention=function(n){return this.formController?n?n.$invalid&&(n.$dirty||this.attempted):this.formController&&this.formController.$invalid&&(this.formController.$dirty||this.attempted):!1},n.prototype.isGoodToGo=function(n){return this.formController?this.needsAttention(n)?!1:n?n.$valid&&(n.$dirty||this.attempted):this.formController&&this.formController.$valid&&(this.formController.$dirty||this.attempted):!1},n}(),i=function(){return["$parse",function(i){return{name:n.directiveName,restrict:"A",require:["ngT3SubmitAction","?form"],controller:t,compile:function(){return{pre:function(n,t,i,r){var u=r[0],f=r.length>1?r[1]:null;u.formController=f;n.t3=n.t3||{};n.t3[i.name]=u},post:function(t,r,u,f){var e=f[0],o=f.length>1?f[1]:null,s=i(u[n.directiveName]);r.bind("submit",function(){return(e.attempted=!0,t.$$phase||t.$apply(),!o.$valid)?!1:(t.$apply(function(){s(t,{$event:event})}),!0)});u.ngT3SubmitActionAttempted&&(e.attempted=!0)}}}}}]};n.directive=i()})(n.SubmitAction||(n.SubmitAction={}));var t=n.SubmitAction})(n.Directives||(n.Directives={}));var t=n.Directives})(App||(App={})),function(n){(function(n){(function(n){var t,i;n.directiveName="serverValidate";t=function(){function n(){this.attempts=[]}return n.prototype.getAttempt=function(n){if(!this.attempts.length)return null;for(var t=0;t<this.attempts.length;t++)if(this.attempts[t].value===n)return this.attempts[t];return null},n.prototype.setError=function(t){if(t){var i=t.result&&t.result.errors&&t.result.errors.length&&t.result.errors[0],r=i?t.result.errors[0].message:n.unexpectedError;this.helpController.serverError=r;this.modelController.$setValidity("server",!1)}else this.helpController.serverError=null,this.modelController.$setValidity("server",!0)},n.prototype.setUnexpectedError=function(){this.setError({result:{errors:[{message:n.unexpectedError}]}})},n.unexpectedError="An unexpected validation error has occurred.",n}();n.ServerValidateController=t;i=function(){return["$http","$timeout","$interval","$parse",function(i,r,u,f){return{name:n.directiveName,restrict:"A",require:[n.directiveName,"modelContrib","ngModel","^formContrib","^form"],controller:t,link:function(t,e,o,s){var h=s[0],c=s[1],a=s[2],b=s[3],g=s[4];h.helpController=c;h.modelController=a;var nt=o[n.directiveName],k=o.serverValidateThrottle,it=o.serverValidateNoSuccess,tt=isNaN(parseInt(k))?0:parseInt(k),v=o.serverValidateData,p,w,d=e.parents("form"),l,y;d.bind("submit",function(n){return(y&&u.cancel(y),b.isSubmitWaiting=!0,l=h.getAttempt(a.$viewValue),l&&l.result)?(h.setError(l.result.isValid?null:l),t.$$phase||t.$apply(),l.result.isValid||n.preventDefault(),g.$invalid&&(b.isSubmitWaiting=!1),l.result.isValid):(c.hasSpinner=!0,y=u(function(){l=h.getAttempt(a.$viewValue);l&&l.result&&(u.cancel(y),c.hasSpinner=!1,d.submit())},10),n.preventDefault(),!1)});t.$watch(function(){return a.$viewValue},function(n){var u,e,s,l;if(p&&r.cancel(p),u=h.getAttempt(n),u&&u.result){w=u;c.hasSpinner=!1;u.result.isValid||u==h.attempts[0]?h.setError(null):h.setError(u);return}if(e=o.name,!v&&!e){h.setUnexpectedError();return}if(v&&(s=f(v)(t)),e&&(!v||v.indexOf(e+":")<0)&&(s=s||{},s[e]=n),l=c.serverError,a.$setValidity("server",!0),c.serverError=null,a.$valid)a.$setValidity("server",l?!1:!0),c.serverError=l;else{h.attempts.length||h.attempts.push({value:n,result:{isValid:!0,errors:[]}});return}p=r(function(){u||(u={value:n},h.attempts.push(u));w=u;var t=r(function(){u!=h.attempts[0]&&(c.hasSpinner=!0)},20);i.post(nt,s).success(function(n){if(r.cancel(t),!n||!n[e]){h.setUnexpectedError();return}(u.result=n[e],u===w&&u!==h.attempts[0])&&(c.hasSpinner=!1,u.result.isValid?h.setError(null):h.setError(u))}).error(function(n,i){(r.cancel(t),c.hasSpinner=!1,i!==0)&&h.setUnexpectedError()})},tt)})}}}]};n.directive=i()})(n.ServerValidate||(n.ServerValidate={}));var t=n.ServerValidate})(n.Directives||(n.Directives={}));var t=n.Directives}(App||(App={})),function(n){(function(n){(function(n){n.directiveName="serverError";var t=function(){return function(){return{name:n.directiveName,restrict:"A",require:["ngModel","modelContrib"],link:function(n,t,i,r){var f=i.serverError,s,h;if(f){var e=i.type,o=e&&e.toLowerCase()=="password",u=r[0],c=r[1];c.serverError=f;h=n.$watch(function(){return u.$error},function(n){s=u.$viewValue;n.required&&o&&u.$setValidity("required",!0);u.$setValidity("server",!1);h()});n.$watch(function(){return u.$viewValue},function(n){u.$dirty&&u.$setValidity("server",!0);o||n!==s||u.$setValidity("server",!1)})}}}}};n.directive=t()})(n.ServerError||(n.ServerError={}));var t=n.ServerError})(n.Directives||(n.Directives={}));var t=n.Directives}(App||(App={})),function(n){(function(n){(function(n){n.directiveName="removeClass";var t=function(){return function(){return{restrict:"A",link:function(t,i,r){i.removeClass(r[n.directiveName])}}}};n.directive=t()})(n.RemoveCssClass||(n.RemoveCssClass={}));var t=n.RemoveCssClass})(n.Directives||(n.Directives={}));var t=n.Directives}(App||(App={})),function(n){(function(n){(function(n){n.directiveName="t3Popover";var t=function(){return["$parse","$timeout",function(t,i){return{name:n.directiveName,restrict:"A",link:function(r,u,f){var o={content:t(f[n.directiveName])(r),trigger:"manual",animation:typeof f.t3PopoverAnimation=="string"?f.t3PopoverAnimation.toLowerCase()!=="false":!0},h=function(){var t=u.data(n.directiveName);t&&u.popover("destroy");u.popover(o);u.data(n.directiveName,!0)},e,s;h();e=!1;r.$watch(f[n.directiveName],function(n){n!=o.content&&(o.content=n,h(),e&&u.popover("show"))});$(window).on("resize",function(){s&&i.cancel(s);s=i(function(){e&&(u.popover("hide"),u.popover("show"))},100)});r.$watch(f.t3PopoverSwitch,function(n){n?(e=!0,u.popover("show")):(e=!1,u.popover("hide"))})}}}]};n.directive=t()})(n.Popover||(n.Popover={}));var t=n.Popover})(n.Directives||(n.Directives={}));var t=n.Directives}(App||(App={})),function(n){(function(n){(function(n){var t,i;n.directiveName="modelContrib";t=function(){function n(){this.hasError=!1;this.hasSuccess=!1;this.hasSpinner=!1;this.serverError=""}return n.prototype.spinnerCssClass=function(){return this.hasSpinner?"has-spinner":null},n.prototype.errorCssClass=function(){return this.hasError?"has-error":null},n.prototype.successCssClass=function(){return this.hasSuccess?"has-success":null},n.prototype.hasFeedback=function(){return this.hasError||this.hasSuccess||this.hasSpinner},n.prototype.feedbackCssClass=function(){return this.hasSpinner?this.spinnerCssClass():this.hasError?this.errorCssClass():this.hasSuccess?this.successCssClass():null},n.prototype.inputGroupCssClass=function(n){if(!this.hasFeedback())return null;var t="input-group";return n&&(t+=" input-group-"+n),t},n.$inject=["$scope"],n}();n.Controller=t;i=function(){return function(){return{name:n.directiveName,restrict:"A",require:[n.directiveName,"ngModel","^formContrib"],controller:t,link:function(n,t,i,r){var u=r[0],f=r[1],e=r[2],o=$.trim(i.name);o&&(e[o]=u);n.$watch(function(){return[f.$valid,f.$dirty,e.isSubmitAttempted,u.hasSpinner]},function(){var n=f.$dirty||e.isSubmitAttempted;u.hasError=!u.hasSpinner&&f.$invalid&&n;u.hasSuccess=!u.hasSpinner&&f.$valid&&n},!0)}}}};n.directive=i()})(n.ModelContrib||(n.ModelContrib={}));var t=n.ModelContrib})(n.Directives||(n.Directives={}));var t=n.Directives}(App||(App={})),function(n){(function(n){(function(n){n.directiveName="input";var t=function(){return function(){return{restrict:"E",require:"?ngModel",link:function(n,t,i,r){var u=angular.lowercase(i.type);r&&u!=="radio"&&u!=="checkbox"&&r.$formatters.unshift(function(n){return r.$invalid&&angular.isUndefined(n)&&typeof r.$modelValue=="string"?r.$modelValue:n})}}}};n.directive=t()})(n.InputPreFormatter||(n.InputPreFormatter={}));var t=n.InputPreFormatter})(n.Directives||(n.Directives={}));var t=n.Directives}(App||(App={})),function(n){(function(n){(function(n){var t,i;n.directiveName="formContrib";t=function(){function n(){this.isSubmitAttempted=!1;this.isSubmitWaiting=!1}return n}();n.Controller=t;i=function(){return["$parse",function(i){return{name:n.directiveName,restrict:"A",require:[n.directiveName,"form"],controller:t,compile:function(){return{pre:function(t,i,r,u){var e=u[0],f;r.formSubmitted&&(e.isSubmitAttempted=!0);f=$.trim(r[n.directiveName]);f&&(t[f]=e)},post:function(n,t,r,u){var f=u[0],e=u[1],o=i(r.formSubmit);t.bind("submit",function(){return(f.isSubmitAttempted=!0,e.$valid&&(f.isSubmitWaiting=!0),n.$$phase||n.$apply(),!e.$valid)?!1:(n.$apply(function(){o(n,{$event:event})}),!0)})}}}}}]};n.directive=i()})(n.FormContrib||(n.FormContrib={}));var t=n.FormContrib})(n.Directives||(n.Directives={}));var t=n.Directives}(App||(App={})),function(n){(function(t){(function(t){t.moduleName="tripod";t.ngModule=angular.module(t.moduleName,[]).directive(n.Directives.InputPreFormatter.directiveName,n.Directives.InputPreFormatter.directive).directive(n.Directives.RemoveCssClass.directiveName,n.Directives.RemoveCssClass.directive).directive(n.Directives.Popover.directiveName,n.Directives.Popover.directive).directive(n.Directives.FormContrib.directiveName,n.Directives.FormContrib.directive).directive(n.Directives.ModelContrib.directiveName,n.Directives.ModelContrib.directive).directive(n.Directives.ServerError.directiveName,n.Directives.ServerError.directive).directive(n.Directives.ServerValidate.directiveName,n.Directives.ServerValidate.directive).directive(n.Directives.SubmitAction.directiveName,n.Directives.SubmitAction.directive)})(t.Tripod||(t.Tripod={}));var i=t.Tripod})(n.Modules||(n.Modules={}));var t=n.Modules}(App||(App={}));