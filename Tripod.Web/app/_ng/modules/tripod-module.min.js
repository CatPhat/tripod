"use strict";var App;(function(n){(function(n){(function(n){n.directiveName="ngT3SubmitAction";var t=function(){function n(){this.attempted=!1}return n.prototype.needsAttention=function(n){return this.formController?n?n.$invalid&&(n.$dirty||this.attempted):this.formController&&this.formController.$invalid&&(this.formController.$dirty||this.attempted):!1},n.prototype.isGoodToGo=function(n){return this.formController?this.needsAttention(n)?!1:n?n.$valid&&(n.$dirty||this.attempted):this.formController&&this.formController.$valid&&(this.formController.$dirty||this.attempted):!1},n}(),i=function(){return["$parse",function(i){return{name:n.directiveName,restrict:"A",require:["ngT3SubmitAction","?form"],controller:t,compile:function(){return{pre:function(n,t,i,r){var u=r[0],f=r.length>1?r[1]:null;u.formController=f;n.t3=n.t3||{};n.t3[i.name]=u},post:function(t,r,u,f){var e=f[0],o=f.length>1?f[1]:null,s=i(u[n.directiveName]);r.bind("submit",function(){return(e.attempted=!0,t.$$phase||t.$apply(),!o.$valid)?!1:(t.$apply(function(){s(t,{$event:event})}),!0)});u.ngT3SubmitActionAttempted&&(e.attempted=!0)}}}}}]};n.directive=i()})(n.SubmitAction||(n.SubmitAction={}));var t=n.SubmitAction})(n.Directives||(n.Directives={}));var t=n.Directives})(App||(App={})),function(n){(function(n){(function(n){var t,i;n.directiveName="serverValidate";t=function(){function n(){this.attempts=[]}return n.prototype.getAttempt=function(n){if(!this.attempts.length)return null;for(var t=0;t<this.attempts.length;t++)if(this.attempts[t].value===n)return this.attempts[t];return null},n.prototype.setError=function(t){if(t){var i=t.result&&t.result.errors&&t.result.errors.length&&t.result.errors[0],r=i?t.result.errors[0].message:n.unexpectedError;this.helpController.serverError=r;this.modelController.$setValidity("server",!1)}else this.helpController.isNoSuccess=!1,this.helpController.serverError=null,this.modelController.$setValidity("server",!0)},n.prototype.setUnexpectedError=function(){this.setError({result:{errors:[{message:n.unexpectedError}]}})},n.unexpectedError="An unexpected validation error has occurred.",n}();n.ServerValidateController=t;i=function(){return["$http","$timeout","$interval","$parse",function(i,r,u,f){return{name:n.directiveName,restrict:"A",require:[n.directiveName,"modelHelper","ngModel","^formHelper","^form"],controller:t,link:function(t,e,o,s){var h=s[0],c=s[1],a=s[2],b=s[3],nt=s[4];h.helpController=c;h.modelController=a;var tt=o[n.directiveName],k=o.serverValidateThrottle,d=o.serverValidateNoSuccess,it=isNaN(parseInt(k))?0:parseInt(k),v=o.serverValidateData,p,w,g=e.parents("form"),l,y;g.bind("submit",function(n){return(y&&u.cancel(y),b.isSubmitDisabled=!0,l=h.getAttempt(a.$viewValue),l&&l.result)?(h.setError(l.result.isValid?null:l),t.$$phase||t.$apply(),l.result.isValid||n.preventDefault(),nt.$invalid&&(b.isSubmitDisabled=!1),l.result.isValid):(c.isServerValidating=!0,y=u(function(){l=h.getAttempt(a.$viewValue);l&&l.result&&(u.cancel(y),c.isServerValidating=!1,g.submit())},10),n.preventDefault(),!1)});t.$watch(function(){return a.$viewValue},function(n){var u,e,s,l;if(p&&r.cancel(p),u=h.getAttempt(n),u&&u.result){w=u;c.isServerValidating=!1;u.result.isValid||u==h.attempts[0]?(h.setError(null),u==h.attempts[0]&&!u.result.isValid&&d&&(c.isNoSuccess=!0)):h.setError(u);return}if(e=o.name,!v&&!e){h.setUnexpectedError();return}if(v&&(s=f(v)(t)),e&&(!v||v.indexOf(e+":")<0)&&(s=s||{},s[e]=n),l=c.serverError,a.$setValidity("server",!0),c.serverError=null,a.$valid)a.$setValidity("server",l?!1:!0),c.serverError=l;else{h.attempts.length||h.attempts.push({value:n,result:{isValid:!0,errors:[]}});return}d&&(c.isNoSuccess=!0);p=r(function(){u||(u={value:n},h.attempts.push(u));w=u;var t=r(function(){u!=h.attempts[0]&&(c.isServerValidating=!0)},20);i.post(tt,s).success(function(n){if(r.cancel(t),!n||!n[e]){h.setUnexpectedError();return}(u.result=n[e],u===w&&u!==h.attempts[0])&&(c.isServerValidating=!1,u.result.isValid?h.setError(null):h.setError(u))}).error(function(n,i){(r.cancel(t),c.isServerValidating=!1,i!==0)&&h.setUnexpectedError()})},it)})}}}]};n.directive=i()})(n.ServerValidate||(n.ServerValidate={}));var t=n.ServerValidate})(n.Directives||(n.Directives={}));var t=n.Directives}(App||(App={})),function(n){(function(n){(function(n){n.directiveName="serverError";var t=function(){return function(){return{name:n.directiveName,restrict:"A",require:["ngModel","modelHelper"],link:function(n,t,i,r){var f=i.serverError,s,h;if(f){var e=i.type,o=e&&e.toLowerCase()=="password",u=r[0],c=r[1];c.serverError=f;h=n.$watch(function(){return u.$error},function(n){s=u.$viewValue;n.required&&o&&u.$setValidity("required",!0);u.$setValidity("server",!1);h()});n.$watch(function(){return u.$viewValue},function(n){u.$dirty&&u.$setValidity("server",!0);o||n!==s||u.$setValidity("server",!1)})}}}}};n.directive=t()})(n.ServerError||(n.ServerError={}));var t=n.ServerError})(n.Directives||(n.Directives={}));var t=n.Directives}(App||(App={})),function(n){(function(n){(function(n){n.directiveName="removeClass";var t=function(){return function(){return{restrict:"A",link:function(t,i,r){i.removeClass(r[n.directiveName])}}}};n.directive=t()})(n.RemoveCssClass||(n.RemoveCssClass={}));var t=n.RemoveCssClass})(n.Directives||(n.Directives={}));var t=n.Directives}(App||(App={})),function(n){(function(n){(function(n){n.directiveName="t3Popover";var t=function(){return["$parse","$timeout",function(t,i){return{name:n.directiveName,restrict:"A",link:function(r,u,f){var o={content:t(f[n.directiveName])(r),trigger:"manual",animation:typeof f.t3PopoverAnimation=="string"?f.t3PopoverAnimation.toLowerCase()!=="false":!0},h=function(){var t=u.data(n.directiveName);t&&u.popover("destroy");u.popover(o);u.data(n.directiveName,!0)},e,s;h();e=!1;r.$watch(f[n.directiveName],function(n){n!=o.content&&(o.content=n,h(),e&&u.popover("show"))});$(window).on("resize",function(){s&&i.cancel(s);s=i(function(){e&&(u.popover("hide"),u.popover("show"))},100)});r.$watch(f.t3PopoverSwitch,function(n){n?(e=!0,u.popover("show")):(e=!1,u.popover("hide"))})}}}]};n.directive=t()})(n.Popover||(n.Popover={}));var t=n.Popover})(n.Directives||(n.Directives={}));var t=n.Directives}(App||(App={})),function(n){(function(n){(function(n){var t,i;n.directiveName="modelHelper";t=function(){function n(){this.isServerValidating=!1;this.isNoSuccess=!1}return n.prototype.hasError=function(){return!this.isServerValidating&&this.modelController.$invalid&&(this.modelController.$dirty||this.formController.submitAttempted)},n.prototype.hasSuccess=function(){return!this.isNoSuccess&&!this.isServerValidating&&!this.hasError()&&this.modelController.$valid&&(this.modelController.$dirty||this.formController.submitAttempted)},n.prototype.hasFeedback=function(){return this.hasError()||this.hasSuccess()||this.hasSpinner()},n.prototype.hasSpinner=function(){return this.isServerValidating},n.$inject=["$scope"],n}();n.Controller=t;i=function(){return function(){return{name:n.directiveName,restrict:"A",require:[n.directiveName,"ngModel","^formHelper"],controller:t,link:function(n,t,i,r){var u=r[0],o=r[1],e=r[2],f;u.modelController=o;u.formController=e;f=$.trim(i.name);f&&(e[f]=u)}}}};n.directive=i()})(n.ModelHelper||(n.ModelHelper={}));var t=n.ModelHelper})(n.Directives||(n.Directives={}));var t=n.Directives}(App||(App={})),function(n){(function(n){(function(n){n.directiveName="input";var t=function(){return function(){return{restrict:"E",require:"?ngModel",link:function(n,t,i,r){var u=angular.lowercase(i.type);r&&u!=="radio"&&u!=="checkbox"&&r.$formatters.unshift(function(n){return r.$invalid&&angular.isUndefined(n)&&typeof r.$modelValue=="string"?r.$modelValue:n})}}}};n.directive=t()})(n.InputPreFormatter||(n.InputPreFormatter={}));var t=n.InputPreFormatter})(n.Directives||(n.Directives={}));var t=n.Directives}(App||(App={})),function(n){(function(n){(function(n){var t,i;n.directiveName="formHelper";t=function(){function n(){this.submitAttempted=!1;this.isSubmitDisabled=!1}return n}();n.Controller=t;i=function(){return["$parse",function(){return{name:n.directiveName,restrict:"A",require:[n.directiveName,"form"],controller:t,compile:function(){return{pre:function(t,i,r,u){var f=u[0],o=u[1],e;f.formController=o;r.submitAttempted&&(f.submitAttempted=!0);e=$.trim(r[n.directiveName]);e&&(t[e]=f)},post:function(n,t,i,r){var u=r[0],f=r[1];t.bind("submit",function(){return(u.submitAttempted=!0,f.$valid&&(u.isSubmitDisabled=!0),n.$$phase||n.$apply(),!f.$valid)?!1:!0})}}}}}]};n.directive=i()})(n.FormHelper||(n.FormHelper={}));var t=n.FormHelper})(n.Directives||(n.Directives={}));var t=n.Directives}(App||(App={})),function(n){(function(t){(function(t){t.moduleName="tripod";t.ngModule=angular.module(t.moduleName,[]).directive(n.Directives.InputPreFormatter.directiveName,n.Directives.InputPreFormatter.directive).directive(n.Directives.RemoveCssClass.directiveName,n.Directives.RemoveCssClass.directive).directive(n.Directives.Popover.directiveName,n.Directives.Popover.directive).directive(n.Directives.FormHelper.directiveName,n.Directives.FormHelper.directive).directive(n.Directives.ModelHelper.directiveName,n.Directives.ModelHelper.directive).directive(n.Directives.ServerError.directiveName,n.Directives.ServerError.directive).directive(n.Directives.ServerValidate.directiveName,n.Directives.ServerValidate.directive).directive(n.Directives.SubmitAction.directiveName,n.Directives.SubmitAction.directive)})(t.Tripod||(t.Tripod={}));var i=t.Tripod})(n.Modules||(n.Modules={}));var t=n.Modules}(App||(App={}));